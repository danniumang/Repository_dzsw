<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.dao.SysUserDao">
	<resultMap id="BaseResultMap" type="com.demo.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		<id column="USERID" jdbcType="VARCHAR" property="userid" />
		<result column="UNAME" jdbcType="VARCHAR" property="uname" />
		<result column="USEX" jdbcType="VARCHAR" property="usex" />
	</resultMap>
	<resultMap id="selectUserRoles"
		type="com.demo.entity.SysUser">
		<id property="userid" column="userid" />
		<result property="uname" column="uname" />
		<result property="usex" column="usex" />
		<result property="password" column="password" />
		<collection property="sysRoles"
			ofType="com.demo.entity.SysRole">
			<id property="roleId" column="roleid" />
			<result property="roleName" column="rolename" />
			<result property="describe" column="describe" />
		</collection>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		USERID, UNAME, USEX
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		select
		<include refid="Base_Column_List" />
		from USER1
		where USERID = #{userid,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		delete from USER1
		where USERID = #{userid,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.demo.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		insert into USER1 (USERID, UNAME, USEX
		)
		values (#{userid,jdbcType=VARCHAR}, #{uname,jdbcType=VARCHAR},
		#{usex,jdbcType=VARCHAR}
		)
	</insert>
	<insert id="insertSelective"
		parameterType="com.demo.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		insert into USER1
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="userid != null">
				USERID,
			</if>
			<if test="uname != null">
				UNAME,
			</if>
			<if test="usex != null">
				USEX,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="userid != null">
				#{userid,jdbcType=VARCHAR},
			</if>
			<if test="uname != null">
				#{uname,jdbcType=VARCHAR},
			</if>
			<if test="usex != null">
				#{usex,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective"
		parameterType="com.demo.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		update USER1
		<set>
			<if test="uname != null">
				UNAME = #{uname,jdbcType=VARCHAR},
			</if>
			<if test="usex != null">
				USEX = #{usex,jdbcType=VARCHAR},
			</if>
		</set>
		where USERID = #{userid,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey"
		parameterType="com.demo.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue May 18 
			20:42:51 CST 2021. -->
		update USER1
		set UNAME = #{uname,jdbcType=VARCHAR},
		USEX = #{usex,jdbcType=VARCHAR}
		where USERID = #{userid,jdbcType=VARCHAR}
	</update>
	<select id="selectUserByUname" resultType="map"
		parameterType="com.demo.entity.SysUser">
		<bind name="param_uname" value="'%'+uname+'%'" />

		select a.userid as "userid",a.uname as "uname",a.usex as "usex"
		,b.rolename as "rolename" from user1 a ,sysrole b,USERROLERELATION c
		where 1=1 and a.userid=c.userid and c.sysroleid=b.roleid
		<if test="uname!=null and  uname!=''">
			and uname like #{param_uname}
		</if>
	</select>

	<select id="checkSysUser" resultType="com.demo.entity.SysUser"
		parameterType="com.demo.entity.SysUser">
		<bind name="param_uname" value="uname" />
		<bind name="param_password" value="password" />
		select a.userid userid,a.uname uname,a.usex usex from user1 a where
		1=1
		<if test="uname!=null and  uname!=''">
			and uname =#{param_uname}
		</if>
		<if test="password!=null and  password!=''">
			and password =#{param_password}
		</if>
	</select>
	<select id="findByName" resultMap="selectUserRoles"
		parameterType="java.lang.String">
		<bind name="param_uname" value="uname" />
		select a.userid as "userid",a.password as "password",a.uname as
		"uname",a.usex as "usex" ,b.rolename as "rolename" ,b.roleid as
		"roleid",b.describe as "describe" from user1 a ,sysrole
		b,USERROLERELATION c where 1=1 and a.userid=c.userid and
		c.sysroleid=b.roleid
		<if test="uname!=null and  uname!=''">
			and uname = #{param_uname}
		</if>

	</select>

	<select id="sysRoles" resultType="com.demo.entity.SysRole"
		parameterType="java.lang.String">
		<bind name="param_rname" value="'%'+roleName+'%'" />
		select * from user1 where 1=2
		<if test="uname!=null and  uname!=''">
			and nName = #{param_uname}
		</if>

	</select>
</mapper>