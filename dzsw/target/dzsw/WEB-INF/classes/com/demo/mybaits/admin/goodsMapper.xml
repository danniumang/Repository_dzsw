<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.dao.GoodsDao">
	<!-- <resultMap id="BaseResultMap" type="com.demo.entity.Auser"> WARNING 
		- @mbg.generated This element is automatically generated by MyBatis Generator, 
		do not modify. This element was generated on Tue May 25 18:54:54 CST 2021. 
		<id column="ANAME" jdbcType="VARCHAR" property="aname" /> <result column="APWD" 
		jdbcType="VARCHAR" property="apwd" /> </resultMap> <sql id="Base_Column_List"> 
		WARNING - @mbg.generated This element is automatically generated by MyBatis 
		Generator, do not modify. This element was generated on Tue May 25 18:54:54 
		CST 2021. ANAME, APWD </sql> <select id="selectByPrimaryKey" parameterType="java.lang.String" 
		resultMap="BaseResultMap"> WARNING - @mbg.generated This element is automatically 
		generated by MyBatis Generator, do not modify. This element was generated 
		on Tue May 25 18:54:54 CST 2021. select <include refid="Base_Column_List" 
		/> from AUSER where ANAME = #{aname,jdbcType=VARCHAR} </select> <delete id="deleteByPrimaryKey" 
		parameterType="java.lang.String"> WARNING - @mbg.generated This element is 
		automatically generated by MyBatis Generator, do not modify. This element 
		was generated on Tue May 25 18:54:54 CST 2021. delete from AUSER where ANAME 
		= #{aname,jdbcType=VARCHAR} </delete> <insert id="insertSelective" parameterType="com.demo.entity.Auser"> 
		WARNING - @mbg.generated This element is automatically generated by MyBatis 
		Generator, do not modify. This element was generated on Tue May 25 18:54:54 
		CST 2021. insert into AUSER <trim prefix="(" suffix=")" suffixOverrides=","> 
		<if test="aname != null"> ANAME, </if> <if test="apwd != null"> APWD, </if> 
		</trim> <trim prefix="values (" suffix=")" suffixOverrides=","> <if test="aname 
		!= null"> #{aname,jdbcType=VARCHAR}, </if> <if test="apwd != null"> #{apwd,jdbcType=VARCHAR}, 
		</if> </trim> </insert> <update id="updateByPrimaryKeySelective" parameterType="com.demo.entity.Auser"> 
		WARNING - @mbg.generated This element is automatically generated by MyBatis 
		Generator, do not modify. This element was generated on Tue May 25 18:54:54 
		CST 2021. update AUSER <set> <if test="apwd != null"> APWD = #{apwd,jdbcType=VARCHAR}, 
		</if> </set> where ANAME = #{aname,jdbcType=VARCHAR} </update> -->
	<select id="selectGoods" resultType="Goods">
		select * from goods
	</select>
	<insert id="addGoods" parameterType="Goods">
		insert into goods (GNAME,GOPRICE,GRPRICE,GSTORE,gricture,GSTYPEID)
		values (#{gName},#{goprice},#{grprice},#{gstore},#{gricture},#{gstypeid})
	</insert>
	<select id="selectGoodsById" resultType="Goods"
		parameterType="java.lang.String">
		select a.*,b.TYPENAME from goods a,goodstype b where a.GSTYPEID=b.GSTYPEID
		and a.goodid =#{goodid,jdbcType=VARCHAR}
	</select>
	<update id="updateGoodsById" parameterType="Goods">
		update goods
		set
		<if test="gName!=null">
			GNAME = #{gName,jdbcType=VARCHAR},
		</if>
		<if test="goprice!=null">
			GOPRICE=#{goprice},
		</if>
		<if test="grprice!=null">
			GRPRICE=#{grprice},
		</if>
		<if test="gstore!=null">
			GSTORE=#{gstore},
		</if>
		<if test="gricture!=null">
			gricture=#{gricture},
		</if>
		<if test="gstypeid!=null">
			GSTYPEID=#{gstypeid}
		</if>
		where GOODID = #{goodid,jdbcType=VARCHAR}
	</update>
	<select id="selectAllGoodsByPage" resultType="Goods"
		parameterType="map">
		select * from (select rownum rn,a.* from goods a where rownum <![CDATA[<=#{perPageSize}]]>
		order by goodid)
		where rn >= #{startIndex}  <!-- //起始行，y = (startPage-1)*pageSize+1 --> <!-- //结束行，x = startPage*pageSize <![CDATA[<=#{startIndex}]]> -->
	</select>
	<select id="goodsType" resultType="GoodsType">
		select * from goodstype
	</select>
	<!-- 单个删除 -->
	<delete id="deleteAGoods" parameterType="java.lang.String">
		delete from goods
		where goodid = #{goodid,jdbcType=VARCHAR}
	</delete>
	<!-- 批量删除 -->
	<delete id="deleteGoods" parameterType="List">
		delete from goods where goodid in
		<foreach item="item" index="index" collection="list" 
		open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
	<!-- 查询关联商品 -->

	<select id="selectCartGoods" resultType="map"
		parameterType="java.lang.String">
		select * from cart where goodid=#{goodid}
	</select>
	<select id="selectFocusGoods" resultType="map"
		parameterType="java.lang.String">
		select * from focus where goodid=#{goodid}
	</select>
	<select id="selectOrderdetailGoods" resultType="map"
		parameterType="java.lang.String">
		select * from orderdetail where goodid=#{goodid}
	</select>


</mapper>